{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "HELM mutualize configuration",
  "definitions": {
    "nameOverride": {
      "type": "string",
      "description": "[helm-common] Override the name"
    },
    "fullnameOverride": {
      "type": "string",
      "description": "[helm-common] Override the fullname"
    },
    "releaseTrunc": {
      "type": "integer",
      "description": "[helm-common] The release trunk length",
      "default": 20
    },
    "prefixTrunc": {
      "type": "integer",
      "description": "[helm-common] The prefix trunk length (release and chart name)",
      "default": 40
    },
    "labels": {
      "type": "object",
      "description": "[helm-common] Pod labels",
      "additionalProperties": {
        "type": "string"
      }
    },
    "annotations": {
      "type": "object",
      "description": "[helm-common] Pod annotations",
      "additionalProperties": {
        "type": "string"
      }
    },
    "serviceName": {
      "type": "string",
      "description": "[helm-common] The name of the service (not Kubernetes service), this will postfix the name"
    },
    "tileCloud-chain": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable the pod configuration"
        },
        "nameOverride": {
          "$ref": "#/definitions/nameOverride"
        },
        "fullnameOverride": {
          "$ref": "#/definitions/fullnameOverride"
        },
        "serviceName": {
          "$ref": "#/definitions/serviceName"
        },
        "releaseTrunc": {
          "$ref": "#/definitions/releaseTrunc"
        },
        "prefixTrunc": {
          "$ref": "#/definitions/prefixTrunc"
        },
        "labels": {
          "$ref": "#/definitions/labels"
        },
        "annotations": {
          "$ref": "#/definitions/annotations"
        }
      }
    }
  },
  "additionalProperties": false,
  "properties": {
    "common": {},
    "sharedAnchor": {
      "description": "Free space where we can defined anchor to be used later"
    },
    "nameOverride": {
      "$ref": "#/definitions/nameOverride"
    },
    "fullnameOverride": {
      "$ref": "#/definitions/fullnameOverride"
    },
    "serviceName": {
      "$ref": "#/definitions/serviceName"
    },
    "releaseTrunc": {
      "$ref": "#/definitions/releaseTrunc"
    },
    "prefixTrunc": {
      "$ref": "#/definitions/prefixTrunc"
    },
    "server": {
      "type": "object",
      "description": "The server configuration",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable the server part"
        },
        "config": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "nameOverride": {
              "$ref": "#/definitions/nameOverride"
            },
            "fullnameOverride": {
              "$ref": "#/definitions/fullnameOverride"
            },
            "serviceName": {
              "$ref": "#/definitions/serviceName"
            },
            "releaseTrunc": {
              "$ref": "#/definitions/releaseTrunc"
            },
            "prefixTrunc": {
              "$ref": "#/definitions/prefixTrunc"
            },
            "labels": {
              "$ref": "#/definitions/labels"
            },
            "annotations": {
              "$ref": "#/definitions/annotations"
            }
          }
        },
        "print": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable the pod configuration"
            },
            "nameOverride": {
              "$ref": "#/definitions/nameOverride"
            },
            "fullnameOverride": {
              "$ref": "#/definitions/fullnameOverride"
            },
            "serviceName": {
              "$ref": "#/definitions/serviceName"
            },
            "releaseTrunc": {
              "$ref": "#/definitions/releaseTrunc"
            },
            "prefixTrunc": {
              "$ref": "#/definitions/prefixTrunc"
            },
            "labels": {
              "$ref": "#/definitions/labels"
            },
            "annotations": {
              "$ref": "#/definitions/annotations"
            }
          }
        },
        "tilecloudchain": {
          "$ref": "#/definitions/tileCloud-chain"
        },
        "home": {
          "type": "object",
          "description": "The home configuration (just a static page that present the services)",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable the service"
            },
            "nameOverride": {
              "$ref": "#/definitions/nameOverride"
            },
            "fullnameOverride": {
              "$ref": "#/definitions/fullnameOverride"
            },
            "serviceName": {
              "$ref": "#/definitions/serviceName"
            },
            "releaseTrunc": {
              "$ref": "#/definitions/releaseTrunc"
            },
            "prefixTrunc": {
              "$ref": "#/definitions/prefixTrunc"
            },
            "labels": {
              "$ref": "#/definitions/labels"
            },
            "annotations": {
              "$ref": "#/definitions/annotations"
            }
          }
        },
        "redirect": {
          "type": "object",
          "description": "The home configuration (just a static page that present the services)",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable the service"
            },
            "nameOverride": {
              "$ref": "#/definitions/nameOverride"
            },
            "fullnameOverride": {
              "$ref": "#/definitions/fullnameOverride"
            },
            "serviceName": {
              "$ref": "#/definitions/serviceName"
            },
            "releaseTrunc": {
              "$ref": "#/definitions/releaseTrunc"
            },
            "prefixTrunc": {
              "$ref": "#/definitions/prefixTrunc"
            },
            "labels": {
              "$ref": "#/definitions/labels"
            },
            "annotations": {
              "$ref": "#/definitions/annotations"
            }
          }
        },
        "sshKey": {
          "type": "string",
          "description": "The SSH key to use to clone the repository"
        },
        "sharedConfig": {
          "nameOverride": {
            "$ref": "#/definitions/nameOverride"
          },
          "fullnameOverride": {
            "$ref": "#/definitions/fullnameOverride"
          },
          "serviceName": {
            "$ref": "#/definitions/serviceName"
          },
          "releaseTrunc": {
            "$ref": "#/definitions/releaseTrunc"
          },
          "prefixTrunc": {
            "$ref": "#/definitions/prefixTrunc"
          },
          "labels": {
            "$ref": "#/definitions/labels"
          },
          "annotations": {
            "$ref": "#/definitions/annotations"
          }
        }
      }
    },
    "additionalConfigs": {
      "type": "object",
      "title": "Additional configuration for the shared configuration manager",
      "additionalProperties": {
        "nameOverride": {
          "$ref": "#/definitions/nameOverride"
        },
        "fullnameOverride": {
          "$ref": "#/definitions/fullnameOverride"
        },
        "serviceName": {
          "$ref": "#/definitions/serviceName"
        },
        "releaseTrunc": {
          "$ref": "#/definitions/releaseTrunc"
        },
        "prefixTrunc": {
          "$ref": "#/definitions/prefixTrunc"
        },
        "labels": {
          "$ref": "#/definitions/labels"
        },
        "annotations": {
          "$ref": "#/definitions/annotations"
        },
        "env": {
          "type": "object",
          "description": "The environment variable used in this configuration",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "additionalWebhooks": {
      "type": "object",
      "description": "Additional WebHooks used by the GitHub WebHook operator to create WebHook in the GitHub repository of the related project",
      "additionalProperties": false,
      "properties": {
        "nameOverride": {
          "$ref": "#/definitions/nameOverride"
        },
        "fullnameOverride": {
          "$ref": "#/definitions/fullnameOverride"
        },
        "serviceName": {
          "$ref": "#/definitions/serviceName"
        },
        "releaseTrunc": {
          "$ref": "#/definitions/releaseTrunc"
        },
        "prefixTrunc": {
          "$ref": "#/definitions/prefixTrunc"
        },
        "labels": {
          "$ref": "#/definitions/labels"
        },
        "annotations": {
          "$ref": "#/definitions/annotations"
        },
        "repositories": {
          "type": "object",
          "description": "The repositories definition to create the WebHook in (<shared_config_source_name>: <github_organization>/<repository_name>)",
          "additionalProperties": {
            "type": "string"
          }
        },
        "secret": {
          "type": "string",
          "description": "The secret used to create the WebHook"
        },
        "base_url": {
          "type": "string",
          "description": "The base URL of the shared configuration manager service"
        }
      }
    },
    "environment": {
      "type": "string",
      "description": "The the used operators environment (int or prod)"
    },
    "rbac": {
      "type": "boolean",
      "description": "Generate the RBAC Kubernetes objects"
    },
    "rbacGroups": {
      "type": "array",
      "description": "The Active directory groups to add to the RBAC configuration",
      "items": {
        "type": "string"
      }
    },
    "envConfigMap": {
      "type": "object",
      "description": "The annotations used in the env ConfigMap",
      "additionalProperties": false,
      "properties": {
        "annotations": {
          "$ref": "#/definitions/annotations"
        }
      }
    }
  }
}
